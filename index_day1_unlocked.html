<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Adventní kalendáY</title>
  <style>
    :root{--bg:#f3f4f6;--card:#fff;--locked:#ddd;--accent:#2b6cb0}
    body{font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);margin:0;display:flex;flex-direction:column;
      min-height:100vh;align-items:center;justify-content:flex-start;padding:28px;}
    h1{margin:6px 0 18px;font-size:28px;color:#111}
    p.desc{margin:0 0 18px;color:#333;opacity:.9}
    .grid{display:grid;grid-template-columns:repeat(6,92px);gap:12px;max-width:620px}
    .cell{width:92px;height:92px;background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.08);
      display:flex;align-items:center;justify-content:center;font-weight:700;font-size:22px;cursor:pointer;user-select:none;position:relative;}
    .cell.locked{background:var(--locked);cursor:not-allowed;opacity:.8}
    .cell.opened{background:linear-gradient(135deg,#fff 0%,#fef3c7 100%);}
    .content{position:absolute;inset:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:6px}
    .daynum{pointer-events:none}
    .footer{margin-top:20px;color:#555;font-size:13px}
    .controls{margin-top:12px;display:flex;gap:8px;align-items:center;justify-content:center}
    button{padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer}
    a.small{color:var(--accent);text-decoration:none;font-weight:600}
    .note{font-size:13px;color:#444;margin-top:10px;max-width:620px;text-align:center}
    @media (max-width:600px){.grid{grid-template-columns:repeat(4,80px)}.cell{width:80px;height:80px;font-size:18px}}
  </style>
</head>
<body>
  <h1>Adventní kalendáY</h1>
  <p class="desc">Klikni na dneaní okénko (nebo staraí). Okénka z budoucnosti jsou zablokovaná.</p>

  <div class="grid" id="grid"></div>

  <div class="controls">
    <button id="teacherBtn">Uitel - odemknout</button>
    <button id="downloadTemplate">Stáhnout HTML (upravit odkazy)</button>
  </div>

  <p class="note"><strong>Instrukce:</strong> V souboru jsou v poli <code>contents</code> 24 polo~ek. Nahra URL nahrávkami (mp3, m4a) nebo odkazem na soubor dostupný z poítae/sít. Pro lokální soubory napia relativní cestu (napY. <code>audio/day1.mp3</code>).</p>

  <script>
    // -- NASTAVENÍ: sem vlo~ konkrétní URL souboro pro ka~dý den (1..24) --
    // Mo~ea pou~ít URL k mp3, m4a, pYípadn k hostovaným souborom (Dropbox, Google Drive - pozor na sdílení),
    // nebo relativní cesty k lokálním souborom (pokud budea otevírat HTML ze stejné slo~ky).
        const contents = {
      1: "audio/1.mp3",
      2: "audio/2.mp3",
      3: "audio/3.mp3",
      4: "audio/4.mp3",
      5: "audio/5.mp3",
      6: "audio/6.mp3",
      7: "audio/7.mp3",
      8: "audio/8.mp3",
      9: "audio/9.mp3",
      10: "audio/10.mp3",
      11: "audio/11.mp3",
      12: "audio/12.mp3",
      13: "audio/13.mp3",
      14: "audio/14.mp3",
      15: "audio/15.mp3",
      16: "audio/16.mp3",
      17: "audio/17.mp3",
      18: "audio/18.mp3",
      19: "audio/19.mp3",
      20: "audio/20.mp3",
      21: "audio/21.mp3",
      22: "audio/22.mp3",
      23: "audio/23.mp3",
      24: "audio/24.mp3",
    };

    // -- Nechte to tak nebo zmHte heslo; uitel mo~e zadat toto heslo pro odemknutí vaech dní
    const TEACHER_CODE = "letmein123";

    // vytvoYení gridu
    const grid = document.getElementById('grid');

    // currentDay: pokud není prosinec, currentDay=0 (zablokováno). Pokud je prosinec, pou~ije se den v msíci.
    const now = new Date();
    // Poznámka: klientská stránka bere as prohlí~ee. Pokud chcete pevnou asovou zónu (Praha), ujistte se, ~e zaYízení má správný as.
    const currentMonth = now.getMonth(); // prosinec === 11
    const currentDate = 1;
    const today = 1;

    // load opened state z localStorage tak aby po otevYení zostalo otevYené
    let opened = [1];

    function saveOpened(){ localStorage.setItem('advent_opened', JSON.stringify(opened)); }

    for (let d = 1; d <= 24; d++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      const num = document.createElement('div');
      num.className = 'daynum';
      num.textContent = d;
      cell.appendChild(num);

      const isAllowed = (d <= today) || opened.includes(d);

      if (!isAllowed) {
        cell.classList.add('locked');
      } else {
        cell.addEventListener('click', () => openDay(d, cell));
      }

      if (opened.includes(d)) {
        cell.classList.add('opened');
        // show content directly
        showContent(d, cell);
      }

      grid.appendChild(cell);
    }

    function openDay(d, cell) {
      // Safety: can't open future days unless teacher override used
      const allowed = (d <= today) || opened.includes(d);
      if (!allowed) {
        alert("Toto okénko je jeat zablokované. Otevírá se a~ v prosinci, v daný den.");
        return;
      }
      if (!opened.includes(d)) {
        opened.push(d);
        saveOpened();
      }
      cell.classList.remove('locked');
      cell.classList.add('opened');
      showContent(d, cell);
    }

    function showContent(d, cell) {
      cell.innerHTML = ''; // clear day number
      const container = document.createElement('div');
      container.className = 'content';

      const title = document.createElement('div');
      title.style.fontSize = '12px';
      title.style.marginBottom = '6px';
      title.textContent = 'Den ' + d;
      container.appendChild(title);

      const src = contents[d];
      if (src) {
        
// audio element
const audio = document.createElement('audio');
audio.controls = true;
audio.autoplay = false;
audio.src = src;
audio.style.width = '100%';

// play/pause button
const btn = document.createElement('button');
btn.textContent = "¶";
btn.style.marginBottom = "6px";
btn.onclick = () => {
    if (audio.paused) {
        audio.play();
        btn.textContent = "ø";
    } else {
        audio.pause();
        btn.textContent = "¶";
    }
};

container.appendChild(btn);
container.appendChild(audio);

      } else {
        const msg = document.createElement('div');
        msg.textContent = "}ádný obsah. Nahrate URL v poli 'contents' v HTML souboru.";
        msg.style.fontSize = '13px';
        container.appendChild(msg);
      }

      // optional message or extra notes
      const note = document.createElement('div');
      note.style.fontSize = '12px';
      note.style.opacity = '0.9';
      note.style.marginTop = '8px';
      note.textContent = "";
      container.appendChild(note);

      cell.appendChild(container);
    }

    // uitelský re~im (odemení vaech dní)
    document.getElementById('teacherBtn').addEventListener('click', ()=>{
      const code = prompt("Zadejte uitelský kód pro odemení vaech dní:");
      if (!code) return;
      if (code === TEACHER_CODE) {
        // odemknout vaechny dny
        for (let d = 1; d <= 24; d++) {
          if (!opened.includes(d)) opened.push(d);
        }
        saveOpened();
        location.reload();
      } else {
        alert("`patný kód.");
      }
    });

    // mo~nost stáhnout aktuální HTML (u~ivatelsky upravit odkazy mimo tento nástroj)
    document.getElementById('downloadTemplate').addEventListener('click', ()=>{
      const blob = new Blob([document.documentElement.outerHTML], {type: 'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'adventni_kalendar.html';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

  </script>
</body>
</html>